{
    "manifest_version": "1.0",
    "driver_id": "smo_signal_driver",
    "name": "Signal",
    "type": "messaging_platform",
    "icon": "assets/icons/signal.svg",
    "api_docs": "https://signald.org/articles/api/",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "audio": true,
        "file": true,
        "reaction": true,
        "max_chars": 2000,
        "max_images": 1,
        "max_videos": 1,
        "allows_html": false,
        "best_image_ratio": "1:1"
    },

    "config_ui": [
        {
            "key": "signal_socket_path",
            "label": "Socket Path",
            "type": "text",
            "required": true,
            "help_text": "Path to Signal CLI socket (e.g., /var/run/signald/signald.sock)"
        },
        {
            "key": "signal_username",
            "label": "Signal Username",
            "type": "text",
            "required": true,
            "help_text": "Your Signal phone number in international format (e.g., +1234567890)"
        },
        {
            "key": "signal_api_key",
            "label": "API Key",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "API key for Signal integration (if using HTTP API)"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 2000",
                "message": "Signal messages are limited to 2,000 characters. Keep messages concise and focused."
            },
            {
                "condition": "image_count > 1",
                "message": "Signal supports only one media attachment per message."
            },
            {
                "condition": "video_size > 100",
                "message": "Videos larger than 100MB may fail to send. Consider compressing large videos."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "socket_auth",
        "post_endpoint": {
            "url": "unix:/var/run/signald/signald.sock",
            "method": "POST",
            "headers": {
                "Content-Type": "application/json"
            }
        },

        "payload_map": {
            "version": "v1",
            "type": "send",
            "username": "{{config.signal_username}}",
            "recipientAddress": {
                "number": "{{recipient_signal_number}}"
            },
            "message": "{{post_content}} {{post_hashtags}}",
            "attachments": {
                "if": "{{has_attachments}}",
                "structure": "{{mapped_signal_attachments}}"
            }
        }
    },

    "optimal_posting_times": ["09:00", "12:00", "15:00", "18:00", "20:00"],
    "engagement_factors": {
        "text_length": 0.5,
        "privacy": 1.8,
        "media": 1.1,
        "time_of_day": 0.9,
        "day_of_week": 0.7
    },
    "notes": "Privacy-focused messaging app with strong encryption. Ideal for secure business communications"
}
