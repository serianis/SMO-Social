{
    "manifest_version": "1.0",
    "driver_id": "smo_viber_driver",
    "name": "Viber",
    "type": "messaging_platform",
    "icon": "assets/icons/viber.svg",
    "api_docs": "https://developers.viber.com/docs/api/viber-api-introduction/",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "file": true,
        "contact": true,
        "location": true,
        "max_chars": 7000,
        "max_images": 1,
        "max_videos": 1,
        "allows_html": false,
        "best_image_ratio": "1:1"
    },

    "config_ui": [
        {
            "key": "viber_auth_token",
            "label": "Auth Token",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your Viber Bot Auth Token from Viber Developers"
        },
        {
            "key": "viber_sender_id",
            "label": "Sender ID",
            "type": "text",
            "required": true,
            "help_text": "Your Viber Bot Sender ID for message identification"
        },
        {
            "key": "viber_account_name",
            "label": "Account Name",
            "type": "text",
            "required": true,
            "help_text": "Your Viber Business Account name displayed to users"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 7000",
                "message": "Viber messages are limited to 7,000 characters. Consider breaking long content into multiple messages."
            },
            {
                "condition": "image_count > 1",
                "message": "Viber supports only one media attachment per message."
            },
            {
                "condition": "video_size > 10",
                "message": "Videos larger than 10MB may fail to send. Consider compressing large videos."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "bearer_token",
        "post_endpoint": {
            "url": "https://chatapi.viber.com/pa/send_message",
            "method": "POST",
            "headers": {
                "X-Viber-Auth-Token": "{{config.viber_auth_token}}",
                "Content-Type": "application/json"
            }
        },

        "payload_map": {
            "receiver": "{{recipient_viber_id}}",
            "min_api_version": 6,
            "sender": {
                "name": "{{config.viber_account_name}}",
                "avatar": "{{sender_avatar}}"
            },
            "tracking_data": "tracking data",
            "type": "text",
            "text": "{{post_content}} {{post_hashtags}}"
        }
    },

    "optimal_posting_times": ["09:00", "13:00", "18:00", "21:00"],
    "engagement_factors": {
        "text_length": 0.3,
        "media": 1.1,
        "time_of_day": 0.8,
        "day_of_week": 0.6
    },
    "notes": "Popular messaging app with strong presence in Eastern Europe, Middle East, and parts of Asia"
}
