{
    "manifest_version": "1.0",
    "driver_id": "smo_discord_driver",
    "name": "Discord",
    "type": "community_messaging",
    "icon": "assets/icons/discord.svg",
    "api_docs": "https://discord.com/developers/docs",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "link_preview": true,
        "max_chars": 2000,
        "max_images": 10,
        "allows_html": false,
        "best_image_ratio": "16:9"
    },

    "config_ui": [
        {
            "key": "discord_bot_token",
            "label": "Bot Token",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your Discord Bot Token from Discord Developer Portal (will be encrypted)"
        },
        {
            "key": "discord_channel_id",
            "label": "Channel ID",
            "type": "text",
            "required": true,
            "help_text": "Discord Channel ID where messages will be sent"
        },
        {
            "key": "discord_guild_id",
            "label": "Guild/Server ID",
            "type": "text",
            "required": true,
            "help_text": "Discord Guild/Server ID (Enable Developer Mode to see this)"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 2000",
                "message": "Discord messages support up to 2,000 characters. Consider breaking long messages."
            },
            {
                "condition": "image_count > 10",
                "message": "Discord allows up to 10 images per message."
            },
            {
                "condition": "video_length > 3600",
                "message": "Discord videos should be under 1 hour for optimal streaming quality."
            },
            {
                "condition": "has_moderation_blocks",
                "message": "Discord has automated moderation. Avoid content that might trigger filters."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "bearer_token",
        "auth_endpoint": {
            "url": "https://discord.com/api/v10/users/@me",
            "method": "GET",
            "headers": {
                "Authorization": "Bot {{config.discord_bot_token}}"
            }
        },
        
        "post_endpoint": {
            "url": "https://discord.com/api/v10/channels/{{config.discord_channel_id}}/messages",
            "method": "POST",
            "headers": {
                "Authorization": "Bot {{config.discord_bot_token}}",
                "Content-Type": "application/json"
            }
        },

        "payload_map": {
            "content": "{{post_content}} {{post_hashtags}}",
            "embeds": {
                "if": "{{has_media}}",
                "structure": [
                    {
                        "title": "{{post_title}}",
                        "description": "{{post_excerpt}}",
                        "url": "{{post_url}}",
                        "color": 3447003,
                        "image": {
                            "if": "{{has_images}}",
                            "structure": {
                                "url": "{{image_url}}"
                            }
                        }
                    }
                ]
            }
        }
    },

    "optimal_posting_times": ["10:00", "14:00", "18:00", "20:00", "22:00"],
    "engagement_factors": {
        "text_length": 0.7,
        "hashtags": 0.4,
        "media": 1.6,
        "time_of_day": 1.3,
        "day_of_week": 1.1
    },
    "trending_hashtags_source": "https://discord.com/channels",
    "notes": "Community-focused messaging platform popular for gaming and interest-based communities"
}