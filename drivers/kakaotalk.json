{
    "manifest_version": "1.0",
    "driver_id": "smo_kakaotalk_driver",
    "name": "KakaoTalk",
    "type": "messaging_platform",
    "icon": "assets/icons/kakaotalk.svg",
    "api_docs": "https://developers.kakao.com/docs/latest/en/kakaotalk-intro",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "link": true,
        "button": true,
        "max_chars": 1000,
        "max_images": 1,
        "max_videos": 1,
        "allows_html": false,
        "best_image_ratio": "1:1"
    },

    "config_ui": [
        {
            "key": "kakao_rest_api_key",
            "label": "REST API Key",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your KakaoTalk REST API Key from Kakao Developers"
        },
        {
            "key": "kakao_admin_key",
            "label": "Admin Key",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your KakaoTalk Admin Key for managing messages"
        },
        {
            "key": "kakao_plus_friend_id",
            "label": "Plus Friend ID",
            "type": "text",
            "required": true,
            "help_text": "Your KakaoTalk Plus Friend ID for business messaging"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 1000",
                "message": "KakaoTalk messages are limited to 1,000 characters. Keep messages concise and impactful."
            },
            {
                "condition": "image_count > 1",
                "message": "KakaoTalk supports only one media attachment per message."
            },
            {
                "condition": "video_size > 5",
                "message": "Videos larger than 5MB may fail to send. Consider compressing large videos."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "api_key",
        "post_endpoint": {
            "url": "https://kapi.kakao.com/v2/api/talk/memo/default/send",
            "method": "POST",
            "headers": {
                "Authorization": "KakaoAK {{config.kakao_rest_api_key}}",
                "Content-Type": "application/x-www-form-urlencoded"
            }
        },

        "payload_map": {
            "template_object": {
                "object_type": "text",
                "text": "{{post_content}} {{post_hashtags}}",
                "link": {
                    "web_url": "{{post_url}}",
                    "mobile_web_url": "{{post_url}}"
                }
            },
            "receiver_uuid": "{{recipient_uuid}}",
            "template_args": {}
        }
    },

    "optimal_posting_times": ["09:00", "12:00", "18:00", "20:00"],
    "engagement_factors": {
        "text_length": 0.4,
        "media": 1.2,
        "time_of_day": 0.9,
        "day_of_week": 0.7
    },
    "notes": "Dominant messaging platform in South Korea. Essential for reaching Korean audiences and businesses"
}
