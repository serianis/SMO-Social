{
    "manifest_version": "1.0",
    "driver_id": "smo_reddit_driver",
    "name": "Reddit",
    "type": "community_platform",
    "icon": "assets/icons/reddit.svg",
    "api_docs": "https://www.reddit.com/dev/api/",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "link_preview": true,
        "max_chars": 40000,
        "max_images": 20,
        "allows_html": true,
        "best_image_ratio": "16:9"
    },

    "config_ui": [
        {
            "key": "reddit_client_id",
            "label": "Client ID",
            "type": "text",
            "required": true,
            "help_text": "Your Reddit App Client ID from reddit.com/prefs/apps"
        },
        {
            "key": "reddit_client_secret",
            "label": "Client Secret",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your Reddit App Client Secret (will be encrypted)"
        },
        {
            "key": "reddit_username",
            "label": "Username",
            "type": "text",
            "required": true,
            "help_text": "Your Reddit username"
        },
        {
            "key": "reddit_password",
            "label": "Password",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your Reddit password (will be encrypted)"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 40000",
                "message": "Reddit posts support up to 40,000 characters, but longer posts may be less engaging."
            },
            {
                "condition": "image_count > 20",
                "message": "Reddit allows up to 20 images per post for maximum engagement."
            },
            {
                "condition": "video_length > 600",
                "message": "Reddit videos should be under 10 minutes for optimal performance."
            },
            {
                "condition": "content_length > 300 && subreddit_type == 'public'",
                "message": "Consider writing shorter posts for public subreddits to increase engagement."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "oauth_2.0",
        "auth_endpoint": {
            "url": "https://www.reddit.com/api/v1/authorize",
            "method": "GET",
            "payload": {
                "response_type": "code",
                "client_id": "{{config.reddit_client_id}}",
                "redirect_uri": "{{config.reddit_redirect_uri}}",
                "scope": "submit,read,identity",
                "state": "{{state}}"
            }
        },
        
        "post_endpoint": {
            "url": "https://oauth.reddit.com/api/submit",
            "method": "POST",
            "headers": {
                "Authorization": "Bearer {{session_token}}",
                "Content-Type": "application/x-www-form-urlencoded"
            }
        },

        "payload_map": {
            "sr": "{{subreddit}}",
            "kind": "link",
            "title": "{{post_title}}",
            "text": "{{post_content}} {{post_hashtags}}",
            "url": {
                "if": "{{post_url}}",
                "structure": "{{post_url}}"
            },
            "flair_id": {
                "if": "{{post_flair}}",
                "structure": "{{post_flair}}"
            }
        }
    },

    "optimal_posting_times": ["09:00", "12:00", "15:00", "18:00", "21:00"],
    "engagement_factors": {
        "text_length": 0.9,
        "hashtags": 0.5,
        "media": 1.1,
        "time_of_day": 1.0,
        "day_of_week": 0.8
    },
    "trending_hashtags_source": "https://www.reddit.com/subreddits/",
    "notes": "Community-driven platform with voting system, subreddits, and discussion threads"
}