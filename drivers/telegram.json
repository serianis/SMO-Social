{
    "manifest_version": "1.0",
    "driver_id": "smo_telegram_driver",
    "name": "Telegram",
    "type": "messaging_platform",
    "icon": "assets/icons/telegram.svg",
    "api_docs": "https://core.telegram.org/bots/api",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "link_preview": true,
        "max_chars": 4096,
        "max_images": 10,
        "allows_html": true,
        "best_image_ratio": "16:9"
    },

    "config_ui": [
        {
            "key": "telegram_bot_token",
            "label": "Bot Token",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your Telegram Bot Token from @BotFather (will be encrypted)"
        },
        {
            "key": "telegram_chat_id",
            "label": "Chat ID",
            "type": "text",
            "required": true,
            "help_text": "Telegram Chat ID where messages will be sent (use @userinfobot to get yours)"
        },
        {
            "key": "telegram_parse_mode",
            "label": "Parse Mode",
            "type": "select",
            "required": false,
            "default": "HTML",
            "options": ["HTML", "Markdown", "None"],
            "help_text": "Text formatting mode for messages"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 4096",
                "message": "Telegram messages support up to 4,096 characters. Long messages will be split."
            },
            {
                "condition": "image_count > 10",
                "message": "Telegram allows up to 10 images per message."
            },
            {
                "condition": "video_length > 3600",
                "message": "Telegram videos should be under 1 hour for optimal delivery."
            },
            {
                "condition": "has_html && parse_mode == 'None'",
                "message": "Enable HTML or Markdown parsing to use formatting in your message."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "bearer_token",
        "auth_endpoint": {
            "url": "https://api.telegram.org/bot{{config.telegram_bot_token}}/getMe",
            "method": "GET"
        },
        
        "post_endpoint": {
            "url": "https://api.telegram.org/bot{{config.telegram_bot_token}}/sendMessage",
            "method": "POST",
            "headers": {
                "Content-Type": "application/json"
            }
        },

        "payload_map": {
            "chat_id": "{{config.telegram_chat_id}}",
            "text": "{{post_content}} {{post_hashtags}}",
            "parse_mode": {
                "if": "{{config.telegram_parse_mode}}",
                "structure": "{{config.telegram_parse_mode}}"
            },
            "reply_markup": {
                "if": "{{has_cta}}",
                "structure": {
                    "inline_keyboard": [
                        [
                            {
                                "text": "{{cta_text}}",
                                "url": "{{cta_url}}"
                            }
                        ]
                    ]
                }
            }
        }
    },

    "optimal_posting_times": ["08:00", "12:00", "16:00", "20:00", "22:00"],
    "engagement_factors": {
        "text_length": 0.8,
        "hashtags": 0.3,
        "media": 1.2,
        "time_of_day": 1.1,
        "day_of_week": 0.9
    },
    "trending_hashtags_source": "https://t.me/",
    "notes": "Cloud-based messaging platform with bot API and channel support"
}