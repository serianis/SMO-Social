{
    "manifest_version": "1.0",
    "driver_id": "smo_weibo_driver",
    "name": "Weibo",
    "type": "microblogging",
    "icon": "assets/icons/weibo.svg",
    "api_docs": "https://open.weibo.com/wiki/API%E6%96%87%E6%A1%A3%E2",

    "capabilities": {
        "text": true,
        "image": true,
        "video": true,
        "link_preview": true,
        "max_chars": 140,
        "max_images": 9,
        "allows_html": false,
        "best_image_ratio": "16:9"
    },

    "config_ui": [
        {
            "key": "weibo_app_key",
            "label": "App Key",
            "type": "text",
            "required": true,
            "help_text": "Your Weibo App Key from Weibo Open Platform"
        },
        {
            "key": "weibo_app_secret",
            "label": "App Secret",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Your Weibo App Secret (will be encrypted)"
        },
        {
            "key": "weibo_access_token",
            "label": "Access Token",
            "type": "password",
            "required": true,
            "encrypt": true,
            "help_text": "Weibo OAuth 2.0 access token with status update permissions"
        },
        {
            "key": "weibo_uid",
            "label": "User ID",
            "type": "text",
            "required": true,
            "help_text": "Your Weibo User ID for posting"
        }
    ],

    "validation_rules": {
        "warnings": [
            {
                "condition": "content_length > 140",
                "message": "Weibo posts support up to 140 characters (similar to Twitter). Longer content will be truncated."
            },
            {
                "condition": "image_count > 9",
                "message": "Weibo allows up to 9 images per post for optimal engagement."
            },
            {
                "condition": "video_length > 140",
                "message": "Weibo videos should be under 2 minutes 20 seconds for optimal performance."
            },
            {
                "condition": "has_chinese_text && !has_english_translation",
                "message": "Consider adding English translations for broader audience reach."
            }
        ]
    },

    "api_interaction": {
        "auth_method": "oauth_2.0",
        "auth_endpoint": {
            "url": "https://api.weibo.com/oauth2/authorize",
            "method": "GET",
            "payload": {
                "client_id": "{{config.weibo_app_key}}",
                "redirect_uri": "{{config.weibo_redirect_uri}}",
                "response_type": "code",
                "state": "{{state}}"
            }
        },
        
        "post_endpoint": {
            "url": "https://api.weibo.com/2/statuses/share.json",
            "method": "POST",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded"
            }
        },

        "payload_map": {
            "access_token": "{{config.weibo_access_token}}",
            "text": "{{post_content}} {{post_hashtags}}",
            "pic": {
                "if": "{{has_images}}",
                "structure": "{{image_data}}"
            },
            "video": {
                "if": "{{has_videos}}",
                "structure": "{{video_url}}"
            }
        }
    },

    "optimal_posting_times": ["08:00", "12:00", "15:00", "18:00", "21:00"],
    "engagement_factors": {
        "text_length": 0.5,
        "hashtags": 0.8,
        "media": 1.6,
        "time_of_day": 1.3,
        "day_of_week": 1.1
    },
    "trending_hashtags_source": "https://s.weibo.com/top/summary",
    "notes": "Chinese microblogging platform with massive user base and cultural significance"
}