<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Chat Interface</title>
    <link rel="stylesheet" href="test-chat-styles.css">
    <style>
        /* Basic reset and layout for testing */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7f9;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .smo-ai-assistant {
            margin: 20px 0;
        }
        
        h1 {
            color: #1e293b;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
        }
        
        .status-success {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .status-error {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .status-info {
            background-color: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>AI Assistant Chat Interface Test</h1>
        
        <div class="status status-info">
            This test simulates the AI Assistant in the "Create Post" tab environment.
        </div>
        
        <div class="smo-ai-assistant">
            <h3>AI Assistant</h3>
            <div id="smo-chat-container" class="smo-chat-embedded"></div>
            <div class="smo-ai-tools">
                <button type="button" class="button" id="smo-ai-generate">Generate Content</button>
                <button type="button" class="button" id="smo-ai-improve">Improve Content</button>
                <button type="button" class="button" id="smo-ai-translate">Translate</button>
            </div>
        </div>
        
        <div class="status status-info">
            Testing environment initialized. The chat interface should appear above with proper styling.
        </div>
    </div>
    
    <!-- Load the chat interface script -->
    <script>
        // Mock the smoChatConfig that would be provided by WordPress
        window.smoChatConfig = {
            root: '/wp-json/smo-social/v1/',
            nonce: 'test_nonce_123456789',
            restNonce: 'test_rest_nonce_987654321',
            userId: 1,
            theme: 'light',
            autoScroll: true,
            showTyping: true,
            streamingEnabled: true,
            debug: true,
            apiWorking: true
        };
        
        // Mock providers for testing
        window.smoChatConfig.providers = [
            { id: 1, name: 'OpenAI', models: [{ name: 'gpt-3.5-turbo' }, { name: 'gpt-4' }] },
            { id: 2, name: 'Anthropic', models: [{ name: 'claude-2' }, { name: 'claude-3' }] }
        ];
    </script>
    
    <!-- Load the chat interface JavaScript -->
    <script src="assets/js/smo-chat-interface.js"></script>
    
    <script>
        // Initialize the chat interface when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded and parsed');
            
            // Check if the chat container exists
            const chatContainer = document.getElementById('smo-chat-container');
            if (chatContainer) {
                console.log('Chat container found:', chatContainer);
                
                // Check if the container has the proper classes
                console.log('Container classes:', chatContainer.className);
                console.log('Container attributes:', chatContainer.attributes);
                
                // Check if the chat interface was initialized
                if (window.smoChat) {
                    console.log('Chat interface initialized successfully');
                    
                    // Add a success message to the page
                    const successMsg = document.createElement('div');
                    successMsg.className = 'status status-success';
                    successMsg.textContent = '✓ Chat interface initialized successfully! The AI Assistant should now be visible and functional.';
                    document.querySelector('.test-container').appendChild(successMsg);
                } else {
                    console.error('Chat interface not initialized');
                    
                    const errorMsg = document.createElement('div');
                    errorMsg.className = 'status status-error';
                    errorMsg.textContent = '✗ Chat interface failed to initialize. Check console for errors.';
                    document.querySelector('.test-container').appendChild(errorMsg);
                }
            } else {
                console.error('Chat container not found');
                
                const errorMsg = document.createElement('div');
                errorMsg.className = 'status status-error';
                errorMsg.textContent = '✗ Chat container element not found.';
                document.querySelector('.test-container').appendChild(errorMsg);
            }
        });
    </script>
</body>
</html>